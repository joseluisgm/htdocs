"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[916],{66638:function(e,t,n){var a=n(45993),o=n.n(a),r=n(97846),l=n.n(r);const i=window.mailpoet_automation_api,c=`${i.root}/mailpoet/v1/automation`,d=(e,t)=>{const[n,o]=(0,a.useState)({data:void 0,loading:!1,error:void 0});return[(0,a.useCallback)((async()=>{var n;o((e=>({...e,loading:!0})));const a=await((e,t)=>fetch(`${c}/${e}`,t))(e,{...t,headers:{...null!==(n=t?.headers)&&void 0!==n?n:{},"X-WP-Nonce":i.nonce}});try{const e=await a.json(),t=a.ok?null:{...a,data:e};o((n=>({...n,data:e,error:t})))}catch(e){const t={response:a};o((e=>({...e,error:t})))}finally{o((e=>({...e,loading:!1})))}}),[t,e]),n]};function u(){const{data:e,loading:t,error:n}=((e,t)=>{const[n,o]=d("workflows",void 0);return(0,a.useEffect)((()=>{n()}),[]),o})();return!e||t?o().createElement("div",null,"Calling API..."):o().createElement("div",null,n?"API error!":"API OK âœ“")}function s(){var e;const[t,{loading:n,error:a}]=d("system/database",{method:"POST"});return o().createElement("div",null,o().createElement("button",{type:"button",onClick:()=>t(),disabled:n},"Recreate DB schema (data will be lost)"),a&&o().createElement("div",null,null!==(e=a?.data?.message)&&void 0!==e?e:"An unknown error occurred"))}function m(){var e;const[t,{loading:n,error:a}]=d("system/database",{method:"DELETE"});return o().createElement("div",null,o().createElement("button",{type:"button",onClick:async()=>{await t(),window.location.href="/wp-admin/admin.php?page=mailpoet-experimental"},disabled:n},"Delete DB schema & deactivate feature"),a&&o().createElement("div",null,null!==(e=a?.data?.message)&&void 0!==e?e:"An unknown error occurred"))}function v(){return o().createElement("div",null,o().createElement(u,null),o().createElement(s,null),o().createElement(m,null))}window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("mailpoet_automation");e&&l().render(o().createElement(v,null),e)}))}},function(e){e.O(0,[351],(function(){return 66638,e(e.s=66638)})),e.O()}]);